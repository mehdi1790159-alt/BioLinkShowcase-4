<!DOCTYPE html>

<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>سیستم CRM فروش خودرو اقساطی</title>

```
<!-- PWA Meta Tags -->
<meta name="theme-color" content="#3B82F6">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="CRM خودرو">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%233B82F6'/><text x='50' y='55' font-size='40' text-anchor='middle' fill='white' font-family='Arial'>CRM</text></svg>">

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Persian Font -->
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

<style>
    body {
        font-family: 'Vazir', 'Tahoma', 'Arial', sans-serif;
        direction: rtl;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Mobile optimizations */
    .mobile-card {
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        transition: all 0.2s ease;
    }
    
    .mobile-card:active {
        transform: scale(0.98);
        box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    
    .sidebar-transition {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .fade-in {
        animation: fadeIn 0.4s ease-out;
    }
    
    @keyframes fadeIn {
        from { 
            opacity: 0; 
            transform: translateY(20px); 
        }
        to { 
            opacity: 1; 
            transform: translateY(0); 
        }
    }
    
    /* Touch-friendly buttons */
    .touch-btn {
        min-height: 44px;
        min-width: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Custom scrollbar for mobile */
    ::-webkit-scrollbar {
        width: 4px;
    }
    
    ::-webkit-scrollbar-track {
        background: transparent;
    }
    
    ::-webkit-scrollbar-thumb {
        background: rgba(0,0,0,0.2);
        border-radius: 2px;
    }
    
    /* Bottom navigation for mobile */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: white;
        border-top: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-around;
        align-items: center;
        z-index: 50;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }
    
    .bottom-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 8px;
        border-radius: 8px;
        transition: all 0.2s ease;
        cursor: pointer;
    }
    
    .bottom-nav-item.active {
        background: #dbeafe;
        color: #3b82f6;
    }
    
    .bottom-nav-item span {
        font-size: 10px;
        margin-top: 2px;
    }
    
    /* Mobile table styles */
    .mobile-table {
        display: block;
    }
    
    .mobile-table-row {
        display: block;
        background: white;
        margin-bottom: 8px;
        padding: 16px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    /* Swipe gestures */
    .swipeable {
        touch-action: pan-y;
    }
    
    /* Loading spinner */
    .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f4f6;
        border-top: 4px solid #3b82f6;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* Status indicators */
    .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        display: inline-block;
        margin-left: 8px;
    }
    
    .status-online { background: #10b981; }
    .status-offline { background: #ef4444; }
    .status-busy { background: #f59e0b; }
</style>
```

</head>

<body class="bg-gray-50 pb-16">
    <!-- Loading Screen -->
    <div id="loading" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-50">
        <div class="spinner mb-6"></div>
        <div class="text-center">
            <h2 class="text-xl font-bold text-gray-800 mb-2">🚗 CRM خودرو</h2>
            <p class="text-gray-600">در حال بارگذاری سیستم...</p>
        </div>
    </div>

```
<!-- App Container -->
<div id="app" class="min-h-screen" style="display: none;">
    <!-- Top Header -->
    <header class="bg-blue-600 text-white sticky top-0 z-40 shadow-lg">
        <div class="flex items-center justify-between p-4">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center">
                    <span class="text-blue-600 font-bold text-sm" id="company-logo-mobile">P</span>
                </div>
                <div>
                    <h1 class="font-bold text-sm" id="company-name-mobile">شرکت فروش خودرو پارسیان</h1>
                    <p class="text-blue-200 text-xs" id="company-phone-mobile">021-88776655</p>
                </div>
            </div>
            <button onclick="showNotifications()" class="touch-btn">
                <i data-lucide="bell" class="w-5 h-5"></i>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="px-4 py-4 mb-16">
        <!-- Dashboard Tab -->
        <div id="tab-dashboard" class="tab-content fade-in">
            <div class="space-y-4">
                <!-- Welcome Card -->
                <div class="mobile-card bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6">
                    <h2 class="text-lg font-bold mb-2">خوش آمدید!</h2>
                    <p class="text-blue-100 text-sm">احمد محمدی - مدیر فروش</p>
                    <div class="mt-4 flex items-center justify-between">
                        <span class="text-sm">امروز: <span id="current-date"></span></span>
                        <div class="status-dot status-online"></div>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-2 gap-3">
                    <div class="mobile-card bg-white p-4 text-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="users" class="w-6 h-6 text-blue-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-gray-900">847</p>
                        <p class="text-xs text-gray-600">کل مشتریان</p>
                    </div>
                    
                    <div class="mobile-card bg-white p-4 text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="car" class="w-6 h-6 text-green-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-gray-900">20</p>
                        <p class="text-xs text-gray-600">فروش ماه</p>
                    </div>
                    
                    <div class="mobile-card bg-white p-4 text-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="phone" class="w-6 h-6 text-purple-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-gray-900">45</p>
                        <p class="text-xs text-gray-600">تماس امروز</p>
                    </div>
                    
                    <div class="mobile-card bg-white p-4 text-center">
                        <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="file-text" class="w-6 h-6 text-orange-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-gray-900">3</p>
                        <p class="text-xs text-gray-600">قرارداد امروز</p>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="mobile-card bg-white p-4">
                    <h3 class="font-semibold mb-3">عمليات سریع</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="showTab('customers')" class="flex items-center justify-center p-3 bg-blue-50 text-blue-600 rounded-lg">
                            <i data-lucide="user-plus" class="w-4 h-4 ml-2"></i>
                            <span class="text-sm">مشتری جدید</span>
                        </button>
                        <button onclick="showTab('contracts')" class="flex items-center justify-center p-3 bg-green-50 text-green-600 rounded-lg">
                            <i data-lucide="file-plus" class="w-4 h-4 ml-2"></i>
                            <span class="text-sm">قرارداد جدید</span>
                        </button>
                        <button onclick="callManager()" class="flex items-center justify-center p-3 bg-purple-50 text-purple-600 rounded-lg">
                            <i data-lucide="phone-call" class="w-4 h-4 ml-2"></i>
                            <span class="text-sm">تماس فوری</span>
                        </button>
                        <button onclick="showTab('reports')" class="flex items-center justify-center p-3 bg-orange-50 text-orange-600 rounded-lg">
                            <i data-lucide="bar-chart-3" class="w-4 h-4 ml-2"></i>
                            <span class="text-sm">گزارش روز</span>
                        </button>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="mobile-card bg-white p-4">
                    <h3 class="font-semibold mb-3">آخرین فعالیت‌ها</h3>
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i data-lucide="phone" class="w-4 h-4 text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900">تماس با علی رضایی</p>
                                <p class="text-xs text-gray-500">10 دقیقه پیش</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i data-lucide="file-text" class="w-4 h-4 text-green-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900">قرارداد پژو 206 منعقد شد</p>
                                <p class="text-xs text-gray-500">30 دقیقه پیش</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i data-lucide="message-square" class="w-4 h-4 text-purple-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900">پیامک یادآوری ارسال شد</p>
                                <p class="text-xs text-gray-500">1 ساعت پیش</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customers Tab -->
        <div id="tab-customers" class="tab-content fade-in" style="display: none;">
            <div class="space-y-4">
                <!-- Header -->
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-bold text-gray-900">مشتریان</h2>
                    <button onclick="addCustomer()" class="touch-btn bg-blue-600 text-white rounded-lg px-3">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                    </button>
                </div>

                <!-- Search -->
                <div class="relative">
                    <i data-lucide="search" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"></i>
                    <input type="text" id="customer-search" placeholder="جستجو مشتری..." class="w-full pr-10 pl-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>

                <!-- Customers List -->
                <div id="customers-list" class="space-y-3">
                    <!-- Customer cards will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Cars Tab -->
        <div id="tab-cars" class="tab-content fade-in" style="display: none;">
            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-bold text-gray-900">خودروها</h2>
                    <button onclick="addCar()" class="touch-btn bg-blue-600 text-white rounded-lg px-3">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                    </button>
                </div>

                <!-- Cars Grid -->
                <div id="cars-grid" class="grid grid-cols-1 gap-4">
                    <!-- Car cards will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Experts Tab -->
        <div id="tab-experts" class="tab-content fade-in" style="display: none;">
            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-bold text-gray-900">کارشناسان</h2>
                    <button onclick="addExpert()" class="touch-btn bg-blue-600 text-white rounded-lg px-3">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                    </button>
                </div>

                <!-- Experts List -->
                <div id="experts-list" class="space-y-3">
                    <!-- Expert cards will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Other tabs -->
        <div id="tab-communications" class="tab-content fade-in" style="display: none;">
            <div class="space-y-4">
                <h2 class="text-lg font-bold text-gray-900">مرکز ارتباطات</h2>
                
                <!-- Communication Options -->
                <div class="grid grid-cols-1 gap-4">
                    <div class="mobile-card bg-white p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold">تلفن نواتل</h3>
                            <div class="status-dot status-online"></div>
                        </div>
                        <button onclick="makeCall()" class="w-full bg-green-600 text-white py-3 rounded-lg font-medium">
                            <i data-lucide="phone-call" class="w-4 h-4 inline ml-2"></i>
                            شروع تماس
                        </button>
                        <div class="mt-3 text-xs text-gray-500">
                            آخرین تماس: علی رضایی - 14:30
                        </div>
                    </div>

                    <div class="mobile-card bg-white p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold">پیامک</h3>
                            <span class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded">45 امروز</span>
                        </div>
                        <div class="space-y-2">
                            <button onclick="sendReminderSMS()" class="w-full bg-purple-600 text-white py-2 rounded-lg text-sm">
                                یادآوری اقساط
                            </button>
                            <button onclick="sendWelcomeSMS()" class="w-full bg-purple-100 text-purple-600 py-2 rounded-lg text-sm">
                                پیام خوش‌آمدگویی
                            </button>
                        </div>
                    </div>

                    <div class="mobile-card bg-white p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold">واتساپ</h3>
                            <div class="status-dot status-online"></div>
                        </div>
                        <div class="space-y-2">
                            <button onclick="sendCatalog()" class="w-full bg-green-600 text-white py-2 rounded-lg text-sm">
                                ارسال کاتالوگ
                            </button>
                            <button onclick="sendFollowUp()" class="w-full bg-green-100 text-green-600 py-2 rounded-lg text-sm">
                                پیگیری فروش
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-settings" class="tab-content fade-in" style="display: none;">
            <div class="space-y-4">
                <h2 class="text-lg font-bold text-gray-900">تنظیمات</h2>
                
                <!-- Company Settings -->
                <div class="mobile-card bg-white p-4">
                    <h3 class="font-semibold mb-3">اطلاعات شرکت</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">نام شرکت</label>
                            <input type="text" id="company-name-setting" class="w-full px-3 py-2 border border-gray-200 rounded-lg" value="شرکت فروش خودرو پارسیان">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">تلفن</label>
                            <input type="text" id="company-phone-setting" class="w-full px-3 py-2 border border-gray-200 rounded-lg" value="021-88776655">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">موبایل</label>
                            <input type="text" id="company-mobile-setting" class="w-full px-3 py-2 border border-gray-200 rounded-lg" value="0912-3456789">
                        </div>
                        <button onclick="saveSettings()" class="w-full bg-green-600 text-white py-3 rounded-lg font-medium">
                            <i data-lucide="check" class="w-4 h-4 inline ml-2"></i>
                            ذخیره تغییرات
                        </button>
                    </div>
                </div>

                <!-- App Settings -->
                <div class="mobile-card bg-white p-4">
                    <h3 class="font-semibold mb-3">تنظیمات برنامه</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <span class="text-sm">اعلان‌ها</span>
                            <label class="switch">
                                <input type="checkbox" id="notifications-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm">حالت تیره</span>
                            <label class="switch">
                                <input type="checkbox" id="dark-mode-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm">ذخیره خودکار</span>
                            <label class="switch">
                                <input type="checkbox" id="auto-save-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- About -->
                <div class="mobile-card bg-white p-4">
                    <h3 class="font-semibold mb-3">درباره برنامه</h3>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>نسخه: 1.0.0</p>
                        <p>تاریخ: 1403/04/26</p>
                        <p>توسعه‌دهنده: سیستم CRM خودرو</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-item active" onclick="showTab('dashboard')" data-tab="dashboard">
            <i data-lucide="home" class="w-5 h-5"></i>
            <span>خانه</span>
        </div>
        <div class="bottom-nav-item" onclick="showTab('customers')" data-tab="customers">
            <i data-lucide="users" class="w-5 h-5"></i>
            <span>مشتریان</span>
        </div>
        <div class="bottom-nav-item" onclick="showTab('cars')" data-tab="cars">
            <i data-lucide="car" class="w-5 h-5"></i>
            <span>خودرو</span>
        </div>
        <div class="bottom-nav-item" onclick="showTab('experts')" data-tab="experts">
            <i data-lucide="user-check" class="w-5 h-5"></i>
            <span>کارشناس</span>
        </div>
        <div class="bottom-nav-item" onclick="showTab('settings')" data-tab="settings">
            <i data-lucide="settings" class="w-5 h-5"></i>
            <span>تنظیمات</span>
        </div>
    </nav>
</div>

<!-- Toast Notification -->
<div id="toast" class="fixed top-20 left-4 right-4 bg-green-600 text-white p-4 rounded-lg shadow-lg transform translate-y-full transition-transform duration-300 z-50" style="display: none;">
    <div class="flex items-center">
        <i data-lucide="check-circle" class="w-5 h-5 ml-2"></i>
        <span id="toast-message">پیام موفقیت</span>
    </div>
</div>

<style>
    /* Toggle Switch */
    .switch {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
    }

    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 24px;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        right: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
    }

    input:checked + .slider {
        background-color: #3b82f6;
    }

    input:checked + .slider:before {
        transform: translateX(-20px);
    }
</style>

<script>
    // Sample Data
    const customers = [
        {
            id: 1,
            name: 'علی رضایی',
            phone: '09123456789',
            nationalId: '1234567890',
            status: 'contract_signed',
            carModel: 'پژو 206 صندوقدار',
            carYear: 1402,
            totalPrice: '850,000,000',
            downPayment: '200,000,000',
            expert: 'سارا احمدی',
            avatar: 'ع'
        },
        {
            id: 2,
            name: 'مریم کریمی',
            phone: '09987654321',
            nationalId: '0987654321',
            status: 'negotiation',
            carModel: 'سمند EF7',
            carYear: 1402,
            totalPrice: '720,000,000',
            downPayment: '150,000,000',
            expert: 'محمد نوری',
            avatar: 'م'
        },
        {
            id: 3,
            name: 'حسن موسوی',
            phone: '09111222333',
            nationalId: '1122334455',
            status: 'payment_pending',
            carModel: 'دنا پلاس',
            carYear: 1401,
            totalPrice: '1,200,000,000',
            downPayment: '300,000,000',
            expert: 'فاطمه زارعی',
            avatar: 'ح'
        },
        {
            id: 4,
            name: 'فاطمه احمدی',
            phone: '09444555666',
            nationalId: '9988776655',
            status: 'lead',
            carModel: 'ساینا
```